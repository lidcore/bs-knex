// Generated by BUCKLESCRIPT VERSION 3.0.0, PLEASE EDIT WITH CARE
'use strict';

var Knex = require("knex");
var Curry = require("bs-platform/lib/js/curry.js");
var BsCallback = require("bs-callback/src/bsCallback.js");

function init(param) {
  var config = param[1];
  config.client = "pg";
  return Knex(config);
}

function raw(t, sql) {
  return t.raw(sql);
}

function destroy(t) {
  return t.destroy();
}

function first(t, from) {
  var p = t.from(from).first();
  return p.then((function (ret) {
                return Promise.resolve((ret == null) ? /* None */0 : [ret]);
              }));
}

var select = (function (knex, args, from) {
    return knex.select.apply(knex, args).from(from);
  });

function select$1(t, $staropt$star, from) {
  var columns = $staropt$star ? $staropt$star[0] : /* array */[];
  return select(t, columns, from);
}

function update(t, table, args) {
  return t.from(table).update(args);
}

function insert(t, into, args) {
  return t.into(into).insert(args);
}

function execute(client, cb) {
  return client.transaction(Curry.__1(cb));
}

function raw$1(t, sql) {
  return t.raw(sql);
}

function destroy$1(t) {
  return t.destroy();
}

function first$1(t, from) {
  var p = t.from(from).first();
  return p.then((function (ret) {
                return Promise.resolve((ret == null) ? /* None */0 : [ret]);
              }));
}

var select$2 = (function (knex, args, from) {
    return knex.select.apply(knex, args).from(from);
  });

function select$3(t, $staropt$star, from) {
  var columns = $staropt$star ? $staropt$star[0] : /* array */[];
  return select$2(t, columns, from);
}

function update$1(t, table, args) {
  return t.from(table).update(args);
}

function insert$1(t, into, args) {
  return t.into(into).insert(args);
}

function latest(client) {
  return client.migrate.latest();
}

var Migrate = /* module */[/* latest */latest];

function run(client) {
  return client.seed.run();
}

var Seed = /* module */[/* run */run];

function raw$2(t, sql) {
  var partial_arg = t.raw(sql);
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function destroy$2(t) {
  var partial_arg = t.destroy();
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function first$2(t, from) {
  var partial_arg = t.from(from).first();
  return Curry._2(BsCallback.$great$great, (function (param) {
                partial_arg.asCallback(param);
                return /* () */0;
              }), (function (ret) {
                return Curry._1(BsCallback.$$return, (ret == null) ? /* None */0 : [ret]);
              }));
}

var select$4 = (function (knex, args, from) {
    return knex.select.apply(knex, args).from(from);
  });

function select$5(t, $staropt$star, from) {
  var columns = $staropt$star ? $staropt$star[0] : /* array */[];
  var partial_arg = select$4(t, columns, from);
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function update$2(t, table, args) {
  var partial_arg = t.from(table).update(args);
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function insert$2(t, into, args) {
  var partial_arg = t.into(into).insert(args);
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function execute$1(client, cb) {
  var partial_arg = client.transaction((function (t) {
          return BsCallback.to_promise(Curry._1(cb, t));
        }));
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function raw$3(t, sql) {
  var partial_arg = t.raw(sql);
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function destroy$3(t) {
  var partial_arg = t.destroy();
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function first$3(t, from) {
  var partial_arg = t.from(from).first();
  return Curry._2(BsCallback.$great$great, (function (param) {
                partial_arg.asCallback(param);
                return /* () */0;
              }), (function (ret) {
                return Curry._1(BsCallback.$$return, (ret == null) ? /* None */0 : [ret]);
              }));
}

var select$6 = (function (knex, args, from) {
    return knex.select.apply(knex, args).from(from);
  });

function select$7(t, $staropt$star, from) {
  var columns = $staropt$star ? $staropt$star[0] : /* array */[];
  var partial_arg = select$6(t, columns, from);
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function update$3(t, table, args) {
  var partial_arg = t.from(table).update(args);
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function insert$3(t, into, args) {
  var partial_arg = t.into(into).insert(args);
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

function latest$1(client) {
  var partial_arg = client.migrate.latest();
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

var Migrate$1 = /* module */[/* latest */latest$1];

function run$1(client) {
  var partial_arg = client.seed.run();
  return (function (param) {
      partial_arg.asCallback(param);
      return /* () */0;
    });
}

var Seed$1 = /* module */[/* run */run$1];

function Make(funarg) {
  var raw = function (t, sql) {
    return Curry._1(funarg[/* from_promise */0], t.raw(sql));
  };
  var destroy = function (t) {
    return Curry._1(funarg[/* from_promise */0], t.destroy());
  };
  var first = function (t, from) {
    return Curry._2(funarg[/* compose */2], Curry._1(funarg[/* from_promise */0], t.from(from).first()), (function (ret) {
                  return Curry._1(funarg[/* return */3], (ret == null) ? /* None */0 : [ret]);
                }));
  };
  var select = (function (knex, args, from) {
    return knex.select.apply(knex, args).from(from);
  });
  var select$1 = function (t, $staropt$star, from) {
    var columns = $staropt$star ? $staropt$star[0] : /* array */[];
    return Curry._1(funarg[/* from_promise */0], select(t, columns, from));
  };
  var update = function (t, table, args) {
    return Curry._1(funarg[/* from_promise */0], t.from(table).update(args));
  };
  var insert = function (t, into, args) {
    return Curry._1(funarg[/* from_promise */0], t.into(into).insert(args));
  };
  var execute = function (client, cb) {
    return Curry._1(funarg[/* from_promise */0], client.transaction((function (t) {
                      return Curry._1(funarg[/* to_promise */1], Curry._1(cb, t));
                    })));
  };
  var raw$1 = function (t, sql) {
    return Curry._1(funarg[/* from_promise */0], t.raw(sql));
  };
  var destroy$1 = function (t) {
    return Curry._1(funarg[/* from_promise */0], t.destroy());
  };
  var first$1 = function (t, from) {
    return Curry._2(funarg[/* compose */2], Curry._1(funarg[/* from_promise */0], t.from(from).first()), (function (ret) {
                  return Curry._1(funarg[/* return */3], (ret == null) ? /* None */0 : [ret]);
                }));
  };
  var select$2 = (function (knex, args, from) {
    return knex.select.apply(knex, args).from(from);
  });
  var select$3 = function (t, $staropt$star, from) {
    var columns = $staropt$star ? $staropt$star[0] : /* array */[];
    return Curry._1(funarg[/* from_promise */0], select$2(t, columns, from));
  };
  var update$1 = function (t, table, args) {
    return Curry._1(funarg[/* from_promise */0], t.from(table).update(args));
  };
  var insert$1 = function (t, into, args) {
    return Curry._1(funarg[/* from_promise */0], t.into(into).insert(args));
  };
  var latest = function (client) {
    return Curry._1(funarg[/* from_promise */0], client.migrate.latest());
  };
  var Migrate = /* module */[/* latest */latest];
  var run = function (client) {
    return Curry._1(funarg[/* from_promise */0], client.seed.run());
  };
  var Seed = /* module */[/* run */run];
  return [
          raw,
          destroy,
          (function (prim, prim$1) {
              return prim.where(prim$1);
            }),
          (function (prim, prim$1) {
              return prim.returning(prim$1);
            }),
          first,
          select$1,
          update,
          insert,
          [
            raw$1,
            destroy$1,
            (function (prim, prim$1) {
                return prim.where(prim$1);
              }),
            (function (prim, prim$1) {
                return prim.returning(prim$1);
              }),
            first$1,
            select$3,
            update$1,
            insert$1,
            execute
          ],
          Migrate,
          Seed
        ];
}

function Promise_002(prim, prim$1) {
  return prim.where(prim$1);
}

function Promise_003(prim, prim$1) {
  return prim.returning(prim$1);
}

var Promise_008 = [
  raw$1,
  destroy$1,
  (function (prim, prim$1) {
      return prim.where(prim$1);
    }),
  (function (prim, prim$1) {
      return prim.returning(prim$1);
    }),
  first$1,
  select$3,
  update$1,
  insert$1,
  execute
];

var Promise$1 = [
  raw,
  destroy,
  Promise_002,
  Promise_003,
  first,
  select$1,
  update,
  insert,
  Promise_008,
  Migrate,
  Seed
];

function Callback_002(prim, prim$1) {
  return prim.where(prim$1);
}

function Callback_003(prim, prim$1) {
  return prim.returning(prim$1);
}

var Callback_008 = [
  raw$3,
  destroy$3,
  (function (prim, prim$1) {
      return prim.where(prim$1);
    }),
  (function (prim, prim$1) {
      return prim.returning(prim$1);
    }),
  first$3,
  select$7,
  update$3,
  insert$3,
  execute$1
];

var Callback = [
  raw$2,
  destroy$2,
  Callback_002,
  Callback_003,
  first$2,
  select$5,
  update$2,
  insert$2,
  Callback_008,
  Migrate$1,
  Seed$1
];

exports.init = init;
exports.Make = Make;
exports.Promise = Promise$1;
exports.Callback = Callback;
/* select Not a pure module */
